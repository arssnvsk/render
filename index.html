<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta
            name="viewport"
            content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    >
    <meta
            http-equiv="X-UA-Compatible"
            content="ie=edge"
    >
    <title>Document</title>
</head>
<body>
<h1>Hello from Node.js!</h1>
<script>
  // Функция для вывода координат в консоль
  function showPosition (position) {
    fetch('/user', {
      method: 'POST',
      body: JSON.stringify({
        la: position.coords.latitude,
        lo: position.coords.longitude
      })
    })
  }

  // Функция для обработки ошибок
  function showError (error) {
    console.error(`Error getting geolocation: ${error.message}`)
  }

  // Проверка поддержки геолокации
  if ('geolocation' in navigator) {
    // Запрос координат
    navigator.geolocation.getCurrentPosition(showPosition, showError)
  } else {
    console.error('Geolocation is not supported in this browser.')
  }
</script>
</body>
</html>
